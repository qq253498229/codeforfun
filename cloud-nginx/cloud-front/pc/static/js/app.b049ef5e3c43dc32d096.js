webpackJsonp([1],{"+dYm":function(t,e){},0:function(t,e){},"7ss8":function(t,e){},"9DVw":function(t,e){},G2BW:function(t,e){},GTtC:function(t,e){},NHnr:function(t,e,a){"use strict";function n(t){a("bN2V")}function s(t){a("qiw0")}function o(t){a("+dYm")}function r(t){a("Xw5o")}function i(t){a("9DVw")}function l(t){a("kk9f")}function c(t){a("7ss8")}function u(t){a("G2BW")}Object.defineProperty(e,"__esModule",{value:!0});var p,d=a("1P6t"),h=a("9rMa"),v={name:"app",data:function(){return{}},computed:Object(h.b)({title:function(t){return t.title},token:function(t){return t.token}})},f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},g=[],m={render:f,staticRenderFns:g},_=m,b=a("/Xao"),C=n,w=b(v,_,!1,C,null,null),P=w.exports,k=a("zO6J"),y={data:function(){return{}},methods:{}},N=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0,!1,!1)},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"jumbotron"},[a("h1",[t._v("Hello, world!")]),t._v(" "),a("p",[t._v("...")]),t._v(" "),a("p",[a("a",{staticClass:"btn btn-primary btn-lg",attrs:{href:"#"}},[t._v("Learn more")])])])])}],$={render:N,staticRenderFns:x},L=$,E=a("/Xao"),S=s,F=E(y,L,!1,S,null,null),X=F.exports,q=a("neBT"),I=a.n(q),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-default navbar-fixed-top"},[a("div",{staticClass:"container"},[a("div",{staticClass:"navbar-header"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("学生管理系统")])],1),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"bs-example-navbar-collapse-1"}},[a("ul",{staticClass:"nav navbar-nav"},[a("li",{class:{active:"/user"==t.$route.path}},[a("router-link",{attrs:{to:"/user"}},[t._v("用户管理")])],1),t._v(" "),a("li",{class:{active:"/teacher"==t.$route.path}},[a("router-link",{attrs:{to:"/teacher"}},[t._v("教师管理")])],1),t._v(" "),a("li",{class:{active:"/course"==t.$route.path}},[a("router-link",{attrs:{to:"/course"}},[t._v("课程管理")])],1)]),t._v(" "),t._m(0,!1,!1)])])]),t._v(" "),a("router-view")],1)},z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav navbar-nav navbar-right"},[a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown","aria-expanded":"false"}},[t._v("Dropdown "),a("span",{staticClass:"caret"})]),t._v(" "),a("ul",{staticClass:"dropdown-menu"},[a("li",[a("a",{attrs:{href:"#"}},[t._v("Action")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"}},[t._v("Another action")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"}},[t._v("Something else here")])]),t._v(" "),a("li",{staticClass:"divider",attrs:{role:"separator"}}),t._v(" "),a("li",[a("a",{attrs:{href:"#"}},[t._v("Separated link")])])])])])}],R={render:j,staticRenderFns:z},A=R,B=a("/Xao"),T=o,G=B(I.a,A,!1,T,null,null),V=G.exports,D={props:{hiddenPageChange:{type:Boolean,default:!0},pageSize:{type:Number,default:10},totalItems:{type:Number,default:0},displayPages:{type:Number,default:6},pageChange:{type:Function}},data:function(){return{totalPages:!1,totalPagesList:[],pageNo:1}},watch:{pageSize:function(){this.changePageList()},totalItems:function(){this.changePageList()}},methods:{goto:function(t){this.pageNo!==t&&(this.pageNo=t,this.changePageList(),this.pageChange(this.pageNo))},changePageList:function(){if(this.totalPages=Math.ceil(this.totalItems/this.pageSize),this.totalPages<=this.displayPages){this.totalPagesList=[];for(var t=1;t<this.totalPages+1;t++)this.totalPagesList.push(t)}else{this.totalPagesList=[];var e=this.pageNo-this.displayPages/2,a=this.pageNo+this.displayPages/2;if(e<1){e=1;for(var n=0;n<this.displayPages;n++)this.totalPagesList.push(e++)}else if(a>this.totalPages){a=this.totalPages;for(var s=this.displayPages-1;s>=0;s--)this.totalPagesList.unshift(a--)}else for(var o=0;o<this.displayPages;o++)this.totalPagesList.push(e++)}}},mounted:function(){this.changePageList()}},O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inline-block"},[a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination"},[a("li",{class:{disabled:1==t.pageNo}},[t.pageNo>1?a("a",{attrs:{href:"javascript:void(0);","aria-label":"Previous"},on:{click:function(e){t.goto(t.pageNo-1)}}},[a("span",[t._v("«")])]):t._e()]),t._v(" "),t._l(t.totalPagesList,function(e){return a("li",{class:{active:t.pageNo==e}},[a("a",{attrs:{href:"javascript:void(0);"},domProps:{textContent:t._s(e)},on:{click:function(a){t.goto(e)}}})])}),t._v(" "),a("li",{class:{disabled:t.pageNo==t.totalPages}},[t.pageNo<t.totalPages?a("a",{attrs:{href:"javascript:void(0);","aria-label":"Next"},on:{click:function(e){t.goto(t.pageNo+1)}}},[a("span",[t._v("»")])]):t._e()])],2)])])},Y=[],H={render:O,staticRenderFns:Y},J=H,M=a("/Xao"),W=r,K=M(D,J,!1,W,null,null),Q=K.exports,U=a("rVsN"),Z=a.n(U),tt=a("2sCs"),et=a.n(tt),at=a("a3Yh"),nt=a.n(at),st=a("3cXf"),ot=a.n(st);d.a.use(h.a);var rt=new h.a.Store({state:{user:{},token:{access_token:"",token_type:"",refresh_token:"",expires_in:0,scope:""},title:""},mutations:(p={},nt()(p,"login",function(t,e){localStorage.token=ot()(e),t.token=e}),nt()(p,"logout",function(t){localStorage.removeItem("token"),t.token=null}),nt()(p,"title",function(t,e){t.title=e}),p)}),it=rt;window.localStorage.getItem("token")&&rt.commit("login",JSON.parse(window.localStorage.getItem("token"))),et.a.defaults.timeout=5e3,et.a.interceptors.request.use(function(t){return it.state.token.access_token&&(t.headers.Authorization=it.state.token.token_type+" "+it.state.token.access_token),t},function(t){return Z.a.reject(t)}),et.a.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 401:it.commit("logout"),Ht.replace({path:"login",query:{redirect:Ht.currentRoute.fullPath}})}return Z.a.reject(t.response.data)});var lt=et.a,ct={components:{page:Q},data:function(){return{showPageCount:6,pageNo:1,pageSize:10,dataCount:0,dataList:[]}},mounted:function(){this.onInit(1)},methods:{onInit:function(t){var e=this;lt.get("api/cloud-user/"+(t||1)+"/10").then(function(t){200===t.status&&(e.dataList=t.data.content,e.dataCount=t.data.totalElements)})}}},ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"panel panel-default "},[t._m(0,!1,!1),t._v(" "),a("div",{staticClass:"panel-body"},[a("table",{staticClass:"table table-striped table-bordered table-hover"},[t._m(1,!1,!1),t._v(" "),a("tbody",t._l(t.dataList,function(e,n){return a("tr",[a("td",{domProps:{textContent:t._s(n+1)}}),t._v(" "),a("td",{domProps:{textContent:t._s(e.username)}}),t._v(" "),a("td",{domProps:{textContent:t._s(e.password)}}),t._v(" "),a("td")])}))]),t._v(" "),a("page",{attrs:{totalItems:t.dataCount,displayPages:t.showPageCount,pageNo:t.pageNo,pageSize:t.pageSize,pageChange:t.onInit}})],1)])])},pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[t._v("\n        用户管理\n        "),a("button",{staticClass:"btn btn-sm btn-primary"},[t._v("添加用户")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("用户名")]),t._v(" "),a("th",[t._v("密码")]),t._v(" "),a("th",[t._v("操作")])])])}],dt={render:ut,staticRenderFns:pt},ht=dt,vt=a("/Xao"),ft=i,gt=vt(ct,ht,!1,ft,null,null),mt=gt.exports,_t={data:function(){return{msg:"what the fuck "}},methods:{}},bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  teacher "),a("br"),t._v("\n  "+t._s(t.msg)+"\n")])},Ct=[],wt={render:bt,staticRenderFns:Ct},Pt=wt,kt=a("/Xao"),yt=l,Nt=kt(_t,Pt,!1,yt,null,null),xt=Nt.exports,$t={data:function(){return{msg:"what the fuck "}},methods:{}},Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  cource "),a("br"),t._v("\n  "+t._s(t.msg)+"\n")])},Et=[],St={render:Lt,staticRenderFns:Et},Ft=St,Xt=a("/Xao"),qt=c,It=Xt($t,Ft,!1,qt,null,null),jt=It.exports,zt={data:function(){return{user:{username:"admin",password:"admin",grant_type:"password"}}},mounted:function(){this.$store.commit("title","Login")},methods:{login:function(){var t=new FormData;t.append("username",this.user.username),t.append("password",this.user.password),t.append("grant_type","password"),this.$http.post("oauth/token",t,{headers:{"Content-Type":"x-www-form-urlencoded",Authorization:"Basic "+btoa("client:secret")}}).then(function(t){console.log(t),!0!==t.ok&&200!==t.status||(this.$store.commit("login",t.body),this.$router.push(this.$route.query.redirect||"/"))},function(t){console.log(t)}),console.log(this.user)}}},Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signin"},[t._m(0,!1,!1),t._v(" "),a("form",{staticClass:"form-signin",attrs:{role:"form"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"用户名",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"密码",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-lg btn-warning btn-block",attrs:{type:"button"},on:{click:t.login}},[t._v("登录")])])])},At=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signin-head text-center"},[a("h1",[a("b",[t._v("用户登录")])])])}],Bt={render:Rt,staticRenderFns:At},Tt=Bt,Gt=a("/Xao"),Vt=u,Dt=Gt(zt,Tt,!1,Vt,null,null),Ot=Dt.exports;d.a.use(k.a);var Yt=new k.a({routes:[{path:"",component:V,children:[{path:"",component:X},{path:"/user",component:mt,meta:{requiresAuth:!0}},{path:"/teacher",component:xt},{path:"/course",component:jt}]},{path:"/login",component:Ot}]}),Ht=Yt;Yt.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?it.state.token?a():a({path:"/login",query:{redirect:t.fullPath}}):a()});var Jt=(a("GTtC"),a("jxdf"),a("Y3Gt"),a("y0Fx"));d.a.prototype.axios=lt,d.a.config.productionTip=!1,d.a.use(Jt.a),new d.a({el:"#app",axios:lt,router:Ht,store:it,template:"<App/>",components:{App:P}})},Xw5o:function(t,e){},bN2V:function(t,e){},kk9f:function(t,e){},neBT:function(t,e){},qiw0:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b049ef5e3c43dc32d096.js.map